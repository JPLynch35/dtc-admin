<nav class="navbar" role="navigation" aria-label="main navigation">

  <article class="logo-box">
    <%= image_tag "DressTheChild.png", class: "dtc-logo" %>
  </article>

  <article class="donation-metrics">
    <div class="metric-square">
      Total Donors
      <div class="donors-circle"><%= @presenter.retrieve_total_donors %></div>
    </div>
    <div class="metric-square">
      Funds Raised
      <div class="donations-circle"><%= number_to_currency(@presenter.retrieve_all_total, unit: '$', precision: 0) %></div>
    </div>
    <div class="metric-square">
      Kids Sponsored
      <div class="kids-circle"><%= @presenter.calculate_kids_sponsored %></div>
    </div>
  </article>

  <div class="navbar-end">
    <div class="navbar-item">
      <div class="buttons">
        <%= link_to "Change Password", edit_user_registration_path, class: "button is-primary bold" %>
        <%= link_to "Sign Out", destroy_user_session_path, method: :delete, class: "button is-danger bold" %>
      </div>
    </div>
  </div>
  
</nav>

  <div class="container has-text-right">
    <%= form_tag '', :method => :get do %>
      <%= date_field_tag :start_date %>
      <%= date_field_tag :end_date %>
      <%= submit_tag 'Filter Donations', class: "button is-warning" %>
    <% end %>
  </div>
 <div class="columns is-gapless">
  <div class="column is-one-quarter">
    <div id="donate-form">
      <h3>Create Donation</h3>
        <%= form_for @presenter.create_new_donation do |f| %>
        <%= f.label :date %>
        <%= f.date_field :date %>
        <%= f.label :name %>
        <%= f.text_field :name %>
        <%= f.label :email %>
        <%= f.text_field :email %>
        <%= f.label :city %>
        <%= f.text_field :city %>
        <%= f.label :state %>
        <%= f.text_field :state %>
        <%= f.label :amount %>
        <%= f.number_field :amount %>
        <%= f.hidden_field :donation_type, value: 'Check' %>
        <%= f.hidden_field :stripe_id, value: '' %>
        <%= f.submit %>
        <% end %>
    </div>
  </div>
  <div class="column is-auto">
    <div class="tables">
      <div class="donation-table">
        <table class="credit-table">
          <thead class="credit-head">
            <tr>
              <th width="15%">Name</th>
              <th width="10%">City</th>
              <th width="10%">State</th>
              <th width="25%">Email</th>
              <th width="10%">Amount</th>
              <th width="15%">Date</th>
            </tr>
          </thead>
          <tbody>
          <% @presenter.retrieve_stripe_donations.each do |donation| %>
            <tr>
                <td width="15%"><%= donation.name %></td>
                <td width="10%"><%= donation.city %></td>
                <td width="10%"><%= donation.state %></td>
                <td width="25%"><%= donation.email %></td>
                <td width="10%"><%= number_to_currency(donation.amount.to_i / 100.00, unit: '$') %></td>
                <td width="15%"><%= donation.date %></td>
            </tr>
          <% end %>
          </tbody>
        </table>
      <div class="subtotal-row">Credit Sub-Total: <%= number_to_currency(@presenter.retrieve_stripe_subtotal, unit: '$') %></div>
      </div>
      <div class="donation-table">
        <table class="check-table">
          <thead class="check-head">
            <tr>
              <th width="15%">Name</th>
              <th width="10%">City</th>
              <th width="10%">State</th>
              <th width="25%">Email</th>
              <th width="10%">Amount</th>
              <th width="15%">Date</th>
            </tr>
          </thead>
          <tbody>
          <% @presenter.retrieve_check_donations.each do |donation| %>
            <tr>
              <td width="15%"><%= donation.name %></td>
              <td width="10%"><%= donation.city %></td>
              <td width="10%"><%= donation.state %></td>
              <td width="25%"><%= donation.email %></td>
              <td width="10%"><%= number_to_currency(donation.amount.to_i / 100.00, unit: '$') %></td>
              <td width="15%"><%= donation.date %>  <%= link_to 'Delete', donation_path(donation), method: :delete, data: { confirm: 'Are you sure you want to delete this donation?' } %></td>
            </tr>
          <% end %>
          </tbody>
        </table>
      <div class="subtotal-row">Check Sub-Total: <%= number_to_currency(@presenter.retrieve_check_subtotal, unit: '$') %></div>
      </div>
    </div>
  </div>
</div>


     